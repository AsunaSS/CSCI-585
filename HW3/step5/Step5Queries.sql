-- Postgres+PostGIS+DataGrip
-- create extension POSTGIS;
-- drop table  SpatialData;
CREATE TABLE SpatialData (Loc_ID integer primary key, Loc varchar, X_Y geometry);

INSERT INTO SpatialData VALUES
(1,'ISE Dept','POINT(-118.29026708987136 34.02014906126706)'),
(2,'CS Dept','POINT(-118.28917994174948 34.01942877567757)'),
(3,'Neuroscience','POINT(-118.2880292252265 34.02059684394024)'),
(4,'Economics Dept','POINT(-118.29091029621178 34.02207552428271)'),
(5,'Media Arts','POINT(-118.28732821170081 34.023758447760734)'),
(6,'Digital Arts','POINT(-118.28642247250633 34.023757626199945)'),
(7,'Communication','POINT(-118.28663963835527 34.02209137103895)'),
(8,'Journalism','POINT(-118.28702177479572 34.020489493480305)'),
(9,'Architecture','POINT(-118.28810261573483 34.01857981461483)'),
(10,'Landscape','POINT(-118.28811278023555 34.01961282378805)'),
(11,'Accounting','POINT(-118.28579142752073 34.01930392781013)'),
(12,'AI for Business','POINT(-118.28523734595467 34.01854041966993)'),
(13,'Home','POINT(-118.28801634279846 34.03205388524771)');

-- The convex hull
SELECT ST_AsText(ST_ConvexHull(ST_Collect(X_Y)))
FROM SpatialData;

-- 4 Nearest places
SELECT Loc, X_Y <#> st_setsrid(st_makepoint(-118.28801634279846,34.03205388524771),4326) AS distance
FROM SpatialData
WHERE Loc <> 'Home'
ORDER BY X_Y <#> st_setsrid(st_makepoint(-118.28801634279846,34.03205388524771),4326)
LIMIT 4;